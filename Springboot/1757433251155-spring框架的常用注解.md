---
title: "spring框架的常用注解"
date: 2025-09-09T15:54:11.155Z
description: "Springboot"
tags:
  - "Springboot"
---

### 一、Bean定义相关注解
#### 1. `@Configuration`
- **作用**：标记一个类为配置类，相当于Spring配置文件中的`<beans>`标签。通常会配合`@Bean`注解使用，在配置类中通过`@Bean`注解定义Bean实例。
- **示例**：
```java
@Configuration
public class AppConfig {
    @Bean
    public UserService userService() {
        return new UserService();
    }
}
```

#### 2. `@Bean`
- **作用**：用在配置类（被`@Configuration`标记的类）的方法上，标记该方法返回的对象将被注册为Spring容器中的一个Bean，默认Bean的名称为方法名。
- **示例**：
```java
@Configuration
public class AppConfig {
    @Bean
    public DataSource dataSource() {
        // 配置数据源并返回
        return new DriverManagerDataSource();
    }
}
```

#### 3. `@Component`、`@Service`、`@Repository`、`@Controller`
- **`@Component`**：通用的组件注解，标记一个类为Spring组件，Spring容器会自动扫描并注册该类为Bean。
- **`@Service`**：通常用在服务层类上，属于`@Component`的衍生注解，语义上更明确表示是业务服务层的组件。
- **`@Repository`**：用在持久层（如DAO层）的类上，属于`@Component`的衍生注解，用于标识数据访问组件，通常会配合事务管理等功能。
- **`@Controller`**：用在Web层的控制器类上，属于`@Component`的衍生注解，标识处理Web请求的控制器组件。
- **示例**：
```java
@Repository
public class UserRepository {
    // 数据库操作相关方法
}

@Service
public class UserService {
    // 业务逻辑相关方法
}

@Controller
public class UserController {
    // 处理Web请求的方法
}
```


### 二、依赖注入相关注解
#### 1. `@Autowired`
- **作用**：自动装配Bean，默认按类型（Type）进行注入。如果需要按名称注入，需配合`@Qualifier`使用。
- **示例**：
```java
@Service
public class UserService {
    @Autowired
    private UserRepository userRepository; // 按类型注入UserRepository的Bean
}
```

#### 2. `@Qualifier`
- **作用**：与`@Autowired`配合使用，指定要注入的Bean的名称，解决按类型注入时的歧义性。
- **示例**：
```java
@Service
public class UserService {
    @Autowired
    @Qualifier("userRepositoryImpl") // 指定注入名称为"userRepositoryImpl"的Bean
    private UserRepository userRepository;
}
```

#### 3. `@Resource`
- **作用**：JDK提供的注解，默认按名称（Name）进行注入，若名称未指定则按类型注入。可以用于注入Bean。
- **示例**：
```java
@Service
public class UserService {
    @Resource(name = "userRepositoryImpl") // 按名称注入名为"userRepositoryImpl"的Bean
    private UserRepository userRepository;
}
```


### 三、作用域与生命周期相关注解
#### 1. `@Scope`
- **作用**：指定Bean的作用域，常见的作用域有`singleton`（单例，默认）、`prototype`（原型，每次获取都会创建新实例）、`request`（每次HTTP请求创建一个实例）、`session`（每个HTTP会话创建一个实例）等。
- **示例**：
```java
@Service
@Scope("prototype") // 设置UserService的作用域为原型
public class UserService {
}
```

#### 2. `@PostConstruct`
- **作用**：标记在方法上，该方法会在Bean初始化完成后被调用，用于执行初始化相关的操作。
- **示例**：
```java
@Service
public class UserService {
    @PostConstruct
    public void init() {
        // 初始化操作，如连接资源等
    }
}
```

#### 3. `@PreDestroy`
- **作用**：标记在方法上，该方法会在Bean销毁前被调用，用于执行销毁前的清理操作。
- **示例**：
```java
@Service
public class UserService {
    @PreDestroy
    public void destroy() {
        // 销毁前的清理操作，如关闭连接等
    }
}
```


### 四、配置类与扫描相关注解
#### 1. `@ComponentScan`
- **作用**：用于指定Spring容器要扫描的包路径，Spring会自动扫描该包及其子包下被`@Component`、`@Service`、`@Repository`、`@Controller`等注解标记的类，并注册为Bean。
- **示例**：
```java
@Configuration
@ComponentScan("com.example.demo") // 扫描com.example.demo包及其子包下的组件
public class AppConfig {
}
```

#### 2. `@PropertySource`
- **作用**：用于加载外部属性文件，将属性文件中的属性值注入到Spring的环境变量或Bean中。
- **示例**：
```java
@Configuration
@PropertySource("classpath:application.properties") // 加载classpath下的application.properties文件
public class AppConfig {
    @Value("${jdbc.url}") // 注入属性文件中的jdbc.url属性值
    private String jdbcUrl;
}
```


### 五、AOP相关注解（面向切面编程）
#### 1. `@Aspect`
- **作用**：标记一个类为切面类，用于定义横切关注点（如日志、事务等）。
- **示例**：
```java
@Aspect
@Component
public class LogAspect {
    // 切面相关的通知等定义
}
```

#### 2. `@Pointcut`
- **作用**：定义切点，用于指定哪些方法会被切面逻辑切入。
- **示例**：
```java
@Aspect
@Component
public class LogAspect {
    @Pointcut("execution(* com.example.demo.service.*.*(..))") // 定义切点，匹配service包下所有类的所有方法
    public void serviceMethodPointcut() {}
}
```

#### 3. `@Before`、`@After`、`@AfterReturning`、`@AfterThrowing`、`@Around`
- **`@Before`**：标记在通知方法上，在切点方法执行前执行通知逻辑。
- **`@After`**：标记在通知方法上，在切点方法执行后（无论是否异常）执行通知逻辑。
- **`@AfterReturning`**：标记在通知方法上，在切点方法正常返回后执行通知逻辑。
- **`@AfterThrowing`**：标记在通知方法上，在切点方法抛出异常后执行通知逻辑。
- **`@Around`**：标记在通知方法上，环绕切点方法，可在方法执行前后自定义逻辑，还能控制方法是否继续执行等。
- **示例**：
```java
@Aspect
@Component
public class LogAspect {
    @Pointcut("execution(* com.example.demo.service.*.*(..))")
    public void serviceMethodPointcut() {}

    @Before("serviceMethodPointcut()")
    public void beforeServiceMethod(JoinPoint joinPoint) {
        // 在service包下方法执行前记录日志等操作
        System.out.println("Before executing method: " + joinPoint.getSignature().getName());
    }
}
```


### 六、Spring Boot相关注解
#### 1. `@SpringBootApplication`
- **作用**：组合注解，包含`@SpringBootConfiguration`、`@EnableAutoConfiguration`、`@ComponentScan`，用于标记Spring Boot应用的主配置类，开启自动配置和组件扫描。
- **示例**：
```java
@SpringBootApplication
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
```

#### 2. `@EnableAutoConfiguration`
- **作用**：开启Spring Boot的自动配置功能，Spring Boot会根据类路径下的依赖等自动配置Spring应用的各种Bean。

以上就是Spring框架中一些常用注解的介绍及作用，不同注解在Spring的组件管理、依赖注入、AOP等方面发挥着重要作用。
